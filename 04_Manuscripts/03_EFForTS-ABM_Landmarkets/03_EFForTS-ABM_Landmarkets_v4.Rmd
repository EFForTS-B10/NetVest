---
title: "Key interactions between crop prices and labor costs: a smallholder simulation study with EFForTS-ABM"
author:
  - Jan Salecker:
      email: jsaleck@gwdg.de
      institute: [affil1]
      correspondence: true
  - Sebastian Renner:
      email: Sebastian.Renner@giga-hamburg.de
      institute: [affil2]
      correspondence: false
  - Jann Lay:
      email: jann.lay@giga-hamburg.de
      institute: [affil2]
      correspondence: false
  - Julia Henzler:
      email: julia.henzler@uni-goettingen.de
      institute: [affil1]
      correspondence: false
  - Kerstin Wiegand:
      email: Kerstin.Wiegand@mail.uni-goettingen.de
      institute: [affil1]
      correspondence: false
institute:
  - affil1: University of Goettingen, Department of Ecosystem Modelling
  - affil2: GIGA, Hamburg
date: "`r format(Sys.time(), '%d %B, %Y')`"
output: 
    bookdown::word_document2:
      fig_caption: yes
      reference_docx: "../templates/template.docx" # Insert path for the DOCX file
      pandoc_args:
      - --lua-filter=../templates/scholarly-metadata.lua
      - --lua-filter=../templates/author-info-blocks.lua
      - --lua-filter=../templates/pagebreak.lua
bibliography: references.bib
csl: "../templates/journal-of-archaeological-science.csl" # Insert path for the bib-style
abstract: |
  Text of abstract
keywords: |
  keyword 1; keyword 2; keyword 3
highlights: |
  These are the highlights. 
---

<!-- This is the format for text comments that will be ignored during renderings. Do not put R code in these comments because it will not be ignored. -->

```{r setup, echo = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  warning = FALSE,
  message = FALSE,
  echo = FALSE,
  comment = "#>",
  fig.path = "../../03_Analyses/09_landmarket_v5_wages/",
  dpi = 300
)
```

## Introduction

Land-use changes have dramatically altered tropical landscapes in past decades [@Powell2015]. 
...Samllholders, Jambi, Rubber, Oilpalm, CRC...

Recent studies found strong trade-offs between multitrophic biodiversity and economic profit of smallholders in Jambi, Indonesia [@Grass2020]. The study was based on an extensive biodiversity dataset and used relatively simple relationships to assess trade-offs between the ecological and economic sphere. In order to gain deeper and more specific insights into the transformation processes and potential interactions between these two spheres, more research is needed. Economic models are great learning tools to understand underlying dynamics and processes of complex socio-ecological systems (SES) [cite]. Recently, economic models are coupled to ecological models in order to gain insights into trade-offs and synergies between the ecological and socio-economic sphere [@Schulze2017; @An2012]. EFForTS-ABM is such an integrated socio-economic ecological simulation model, focusing on smallholder agriculture in Jambi province, Indonesia [@Dislich2018]. The model simulates rational economic decision-making of smallholder farmers and calculates consequences on the ecological sphere. In earlier publications and detailed sensitivity analyses we found that output crop prices and costs are major drivers of economic and ecological patterns at multiple spatial and temporal scales [@Dislich2018]. For example, low prices led to a high amount of bankruptcy of smallholders, especially when heterogeneous farming efficiency was included [@Dislich2018]. This led to high amounts of abandoned land. In reality however, when smallholders drop out of business land is mostly offered on the land market. Thus, we implemented a new model version that features a land market module which allows the transfer of land between households. This also means that economically successful smallholders can buy more land, and by that initiating land consolidation processes and increasing farming efficiency of the overall agricultural system. Both processes, are likely to inherit multiple complex interactions with other processes on the economic and ecological sphere. In this paper, we are interested in how different facets of spatial and non-spatial economic and ecological processes react to changes in the crop prices and labor costs. These parameters are the main drivers of the economic system and are of utmost importance because they can be specifically influenced by policy-making. The main question of this study is therefore, "How do prices and labor costs affect household properties, landscape properties, and overall economic and ecological indicators in smallholder-driven economic systems?".




## Methods

Our analysis was conducted with EFForTS-ABM version xy [cite]. Simulations were executed on the GWDG-HPC of the university of Göttingen, through the R package nlrx [@Salecker2019a]. The initial landscape was created through our landscape generator EFForTS-LGraf [@Salecker2019]. A detailed description of the EFForTS-ABM model was published in [@Dislich2018].

#### Short description of EFForTS-ABM

- Jan Salecker

#### Description of the new landmarket module

- Sebastian Renner

#### Description of the biodiversity module

- Julia Henzler

#### Scenarios

We initialized EFForTS-ABM with a landscape that represents a typical situation in Jambi around XX years ago (see Figure \@ref(fig:landscape)). The landscape is dominated by rubber farming (~80% of agricultural area), smallholder households are rather small (log-normal distribution with a mean of 1 ha and a standard-deviation of 0.9) and are distributed within several small village clusters. The smallholders in our model landscapes choose between two different crop types (oil palm and rubber monoculture) through an economically-based rationale decision-making approach. Simulations are performed over 50 simulation years. 

In order to gain a detailed understanding of model interactions, we need to conduct and analyze price and cost scenarios. In the real world, crop output prices depend on global markets and are very dynamic and this hinders accurate understanding of underlying mechanisms at play. In such cases, it is essential to investigate simple price scenarios. In our experiment, we varied the output prices of the two crops, based on historical price data [cite]. From these historical prices, we calculated and extracted for each crop the 25% and 75% quantiles. These price levels were then simulated in a full factorial simulation design resulting in four different settings: (1) *high*: both crops are set to the 75% quantile price; (2) *low*: both crops are set to the 25% quantile price; (3) *oilpalm-boom*: the palm oil price is set to the 75% quantile price, and the rubber price is set to the 25% quantile price; (4) *rubber-boom*: the rubber price is set to the 75% quantile price, and the palm oil price is set to the 25% quantile price. In all scenarios, prices were held constant at their scenario-specific levels throughout the simulation time (50 years).

In addition, we were interested in how these different price levels interact with wages for labor. Thus, each of these four price scenarios was repeated with five different levels of wages from the observed field data wage level to doubled wages. Simulations were repeated XXX times to control for randomness, resulting in XXX simulations (4 price scenarios * 5 wage levels * XXX replicates). For our analysis, we only considered model outputs from the last 20 years. Several spatial and non-spatial outputs were collected during and after simulations (see Table xy). 

*Further parameterisation: The landmarkets were set to active, and heterogeneity is present with learning activated.*


```{r landscape, out.width = "100%", fig.cap = "Initial landscape for model simulations, generated with EFForTS-LGraf. Orange patches indicate rubber plantations, whereas red patches indicate oil palm plantations. The green area is non-agricultural land. White lines indicate roads and black triangles indicate positions of smallholder home bases."}
knitr::include_graphics(file.path(knitr::opts_chunk$get("fig.path"), "initial_landscape.png"))
```


## Results and discussion

```{r lines, out.width = "100%", fig.cap = "Effect of price scenarios and wages on several landscape and household characteristics during the last 20 simulation years out of 50 simulated years."}
knitr::include_graphics(file.path(knitr::opts_chunk$get("fig.path"), "lines_panel.png"))
```

The fraction of agricultural area containing oil palm plantations was strongly affected by both the output prices and the wage levels (Fig. \@ref(fig:lines) A). Under default wage levels (wage=1), the oil palm area did only increase when the price difference between rubber and oil palm was at its maximum (*oilpalm-boom*). This shows that at low wage levels, rubber is more profitable under most price scenarios. However, when wages increase, we observe oil palm expansion even in scenarios where the oil palm price is low (*low*). Still, in all scenarios except the *oilpalm-boom*, rubber is the dominating land-use.

In addition to landscape composition (i.e. land-use fractions), landscape configuration (i.e. distribution of land uses) is an important driver of ecosystem functioning and biodiversity [@Dislich2017]. We looked at the edge density of resulting landscapes in order to assess the complexity of the landscape configuration. In a two crop system, we expect that the edge density is at its maximum when both crops are cultivated at 50%. However, a second driver, the allocation of land to the households may also affect spatial complexity. Overall, we observe higher edge density values when the conditions are less favorable for rubber (Fig. \@ref(fig:lines) B) and the oil palm area increases (cf. Fig. \@ref(fig:lines) A). However, we also see a reversing trend when the fraction of oil palm increases above 50%.

The number of households and the average size of agricultural area each household cultivates are indicator variables of consolidation processes. The number of active households in the model decreased with higher wages, irrespective of the price scenario (Fig. \@ref(fig:lines) C). The effect was strongest in scenarios where the rubber price is considerably low (*low*, *oilpalm-boom*). In both of these scenarios, rubber cultivation is not competitive enough in comparison to oilpalm cultivation, thus households need to switch to the more profitable oil palm. While offering higher economic benefit, this comes at the price of high investment costs for changing land-use of plantations which can not be covered by all smallholders in our model. The complete economic system becomes more competitive and only the most efficient and wealthy households survive in business.

Due to the newly introduced landmarket module, existing smallholders can buy the land of other smallholders who dropped out of business. There is also the possibility that new immigrant smallholders enter the model and buy land. In the first case, we expect to see an increase in mean household size, whereas in the second case we expect to see an increase in immigrant household number. The household size increases significantly only for high wage levels under price scenarios where rubber prices are low (Fig. \@ref(fig:lines) D), which is in line with the overall lower number of households in these scenarios. The number of immigrant smallholders is varying slightly but is almost constantly shifting around 5 to 10 for all wage levels and price scenarios except the *oilpalm-boom* at intermediate wage levels, where we observe a strong increase in immigrant household number (Fig. \@ref(fig:lines) E). Finally, if the system becomes too competetive, even the most efficient households might not be able to buy land on the landmarket. In these cases, land might become abandoned. In our scenarios we only observe very little amount of abondend land, even in the most extreme scenario of *low* prices under doubled wages (Fig. \@ref(fig:lines) F). This shows that our scenario selection is still within reasonable boundaries and that all scenarios still provide options for sustainable farming. 

In summary, we see clear consolidation effects (less households with larger area), especially when rubber prices are low. This has strong implications for the collective crop yields in our landscape. For palm oil, we can see that the average yield across all households is increasing drastically when the system is more competetive and strong consolidation takes place (Fig. \@ref(fig:lines) G). For rubber, we observe a different picture. The only scenario where we observe consolidation towards higher efficiency is the *low* price scenario at medium to high wages. Here, less efficient rubber farmers are forced out of business, resulting in higher average yields (Fig. \@ref(fig:lines) H).

```{r ef, out.width = "100%", fig.cap = "Comparison of provided biodiversity, carbon storage and consumption under different price (panels) and wage (x-axes) scenarios. The three output variables biodiversity, carbon storage and consumüption are given in relative terms across all scenario settings. This is, we ranked each of these three variables across all scenario settings as a percentage value ranging from 0 (indicating the lowest outcome of any scenario) to 1 (indicating the highest outcome of any scenario). That means, a bar of value 3 is the theoretical maximum and comprises the highest outcome for all three variables."}
knitr::include_graphics(file.path(knitr::opts_chunk$get("fig.path"), "bar_ef.png"))
```

Our integrated economic-ecological models provides the possibility to assess synergies and trade-offs between the economic and ecological sphere. Our main measure of economic benefit is the mean consumption of households. Overall, our results show complex interactions between prices and wages (Fig. \@ref(fig:ef)). In the two scenarios with high rubber prices (*high*, *rubber-boom*), consumption decreases with increasing wages, as expected. However, the two other scenarios (*low*, *oilpalm-boom*) show higher consumption for higher wage levels. As shown in Fig. \@ref(fig:lines), these scenarios led to oilpalm-dominated agriculture which experiences consolidation. In conclusion, higher prices do not necessarily lead to higher consumption and rubber-dominated agriculture behaves fundamentally different from oilpalm-dominated agriculture, with consumption increasing with wages in the former but not in the latter type of agriculture.

In terms of ecological functions, carbon and biodiversity, the wage levels are way less important than the price scenarios. The best scenario was *low* prices, with high wages. Under these circumstances, economic pressure is at its maximum, leading to strong consolidation. Only the most efficient households survive and are able to make money from rubber in view of low prices and high costs. However, these households tend to cultivate larger areas and need to save a large amount of money to replant all fields. Thus, plantation cycles are probably extended, leading to higher carbon storage and biodiversity. The biodiversity shows a very clear pattern with improved biodiversity for all scenarios where rubber is still competitive (*low*, *high*, *rubber-boom*, Fig. \@ref(fig:ef)). However, the biodiversity is calculated with preliminary parameter values, so we need to take caution interpreting these values. But it shows that in comparison to oil palm dominated farming, rubber-dominated farming is better for landscape biodiversity.

In summary, we could show that consumption (which relates to economic welfare within our virtual smallholder community), carbon accumulation and biodiversity follow quite different trajectories when output prices of crops and wage prices change. Heterogeneous responses between different output variables automatically lead to trade-off and synergy cases when comparing these variables. All three variables relate to ecosystem functioning and services and are of utmost importance when it comes to policy design and conservation approaches towards fulfilling sustainable development goals in the future [cite]. Thus, we were highly interested if there are certain price patterns that could lead to high synergies across the three outputs. And indeed, we see some scenarios, where all three responses show relatively high ranks:
We observe the highest synergy at *high* prices (or at least high rubber prices, *rubber-boom*) in combination with low wages. Under doubled wages we still observe high economic benefit under an *oilpalm-boom* but also negative trade-offs in carbon and especially biodiversity. With medium wages and price levels that allow profitable rubber farming (*low*, *rubber-boom*, *high*), we still see considerable amount of consumption and high ranks in carbon and biodiversity.

```{r src, out.width = "100%", fig.cap = "Standardized regression coefficients (SRCs) of various model outputs. SRCs were calculated through linear regression of outputs against scenario parameters price and wage. Panels show either direct parameter effects (row parameter [see labels on the right] = column parameter) or interaction effects (row parameter != column parameter). Output variables are given on the left y-axis for enhanced readability. Colors indicate groups of output variables with red = functions, grey = yield, yellow = households and blue = landscape variables."}
knitr::include_graphics(file.path(knitr::opts_chunk$get("fig.path"), "src_grid.png"))
```

In order to provide a more generalizable outcome and to assess interaction effects, we applied linear models to our output matrix and calculated standardized regression coefficients. 

Increasing rubber price has a positive effect on all three main output functions (consumption, biodiversity and carbon; Fig. \@ref(fig:src)A.a) but prevents consolidation (indicated by the negative correlation with household size and positive correlation with household number, i.e. resulting in many small households) and increases in efficiency (indicated by positive correlation with edge density and negative correlation with oil palm area, i.e. leading to fragmented landscapes). Increasing oil palm prices have a positive effect on consumption but show trade-offs in carbon and biodiversity (Fig. \@ref(fig:src)B.b). High wages facilitate increased oil palm farming. High wages also are the main driver of household consolidation and increasing efficiency of the economic system (Fig. \@ref(fig:src)C.c).

However, our analysis also revealed some important interactions between prices and wages. For rubber prices, high wages reverse the positive trend on our three main functions (consumption, biodiversity and carbon, Fig. \@ref(fig:src)C.a). For oil palm prices, the directions of effects is almost the same (except edge density) but the negative trade-off effects on biodiversity and carbon are less pronounced (Fig. \@ref(fig:src)C.b).

From this we can conclude: Increased oil palm farming has negative effects on carbon and biodiversity but positive impact on economic welfare, leading to an ecological-economic trade-off. Yet, the negative environmental effects of increased oil palm farming can be mitigated by increasing wages. To improvie biodiversity, rubber should still be present in the system, but not combined with high wages. Thus, we suggest to give subsidies to rubber farmers in order to compensate for the higher wages that are needed for efficient oil palm farming.




## Outlook

The most important thing is to improve the biodiversity model. Julia is working on this!
Besides that some questions need to be discussed:

* What do you think of the experimental design ?
    * Do you have suggestions for improvements? (other/additional metrics)
    

## TODO:

** Run Simulations again and log mean inefficiency for rubber and oilpalm across all households **

** Run a *policy* scenario, where we give subsidies to rubber farmers. i.e. wages only increase for oil palm farming **

<!-- The following line inserts a page break  -->
\newpage

# References 
<!-- The following line ensures the references appear here for the MS Word or HTML output files, rather than right at the end of the document (this will not work for PDF files):  -->
<div id="refs"></div>


\newpage

### Appendix

\newpage

### Colophon

This report was generated on `r Sys.time()` using the following computational environment and dependencies: 

```{r colophon, cache = FALSE}
# which R packages and versions?
if ("devtools" %in% installed.packages()) devtools::session_info()
```

The current Git commit details are:

```{r}
# what commit is this file at? 
if ("git2r" %in% installed.packages() & git2r::in_repository(path = ".")) git2r::repository(here::here())  
```
